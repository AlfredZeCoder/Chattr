<div class="container">
    <div class="chat-container">
        <div class="conversations-container">
            <div class="search-bar">
                <input [(ngModel)]="searchValue" type="text" class="search" placeholder="Search" />
            </div>
            <div class="conversations">
                @for (conversation of conversations; track conversation) {
                @if (conversation.userName.toLowerCase().startsWith(searchValue.toLowerCase())) {
                <div class="conversation" (click)="getConversation(conversation)"
                    [ngStyle]="{ 'background-color': hasClickedConversation && conversation.id == clickedConversationId ? '#636b77' : null }">
                    <div class="name-and-time">
                        <div class="name"
                            [ngStyle]="{ 'color': hasClickedConversation && conversation.id == clickedConversationId ? 'rgb(218, 220, 224)' : null }">
                            {{ conversation.userName }}
                        </div>
                        <div class="time"
                            [ngStyle]="{ 'color': hasClickedConversation && conversation.id == clickedConversationId ? 'rgb(218, 220, 224)' : null }">
                            @if (!isYesterday(conversation.timestamp)) {
                            {{ conversation.timestamp | date: 'shortTime' }}
                            } @else if (isYesterday(conversation.timestamp)) {
                            Yesterday
                            } @else {
                            {{ conversation.timestamp | date: 'shortDate' }}
                            }
                        </div>
                    </div>
                    <div class="last-message" [ngStyle]="changeLastMessageColor(conversation)">
                        @if (!conversation.lastMessageIsRead){
                        <div class="unread-dot"></div>
                        }
                        {{ conversation.lastMessage | truncate: 25 }}
                    </div>
                </div>
                }
                }
            </div>
        </div>
        <div class="chat">
            @if (hasClickedConversation) {
            <app-message [conversation]="inputConversation"></app-message>
            }
        </div>
    </div>
</div>